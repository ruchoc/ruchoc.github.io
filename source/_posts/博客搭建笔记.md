---
title: 博客搭建笔记
date: 2021-02-22 11:17:50
tags:
---
# 安装node.js

直接进入[node.js官网](https://nodejs.org/en/)根据操作提示下载安装自己操作系统对应的版本就可，最后安装好后，打开cmd并输入`npm -v`和`node -v`，如果显示出版本号就表明安装成功。
如果没有梯子，可以安装阿里的国内镜像加速
`npm config set registry https://registry.npm.taobao.org`

# 安装git
依旧是进入[git官网](https://git-scm.com/)下载安装相应版本的git，安装好后，在命令提示符里输入
`git --version`验证安装是否成功
# 拥有GitHub账号
进入[GitHub官网](https://github.com/)，没有账号的可以根据官网相应步骤注册一个
在有github账号后，在右上角头像处点击*your repositories*选项
![点击your repositories](https://github.com/ruchoc/markdownPhotos/raw/main/pictures/1.png)
点击new按钮新建一个仓库
在输入自己仓库名字时一定要有后缀==.github.io==
![](https://github.com/ruchoc/markdownPhotos/raw/main/pictures/2.png)
# 安装hexo
挑选一个合适的地方用来存放博客文件，比如我的博客文件就在*D:/blog*里面
在该目录下右键点击`Git Bash Here`打开git的控制台窗口，以后我们所有操作都用git控制台，就不要使用cmd来操作了
定位到该目录下，输入`npm i hexo-cli -g`安装hexo，中途可能跳出几个Warning，无视即可
安装完后，输入`hexo -v`验证是否成功
然后输入`hexo init`来初始化文件夹，接着输入`npm install`来安装必备组件
这样本地的网站配置就完成了，接着输入`hexo g`生成静态网页和`hexo s`打开本地服务器，然后浏览器访问[](localhost:4000)就可以看到刚诞生的博客了
按`Ctrl+C`可以关闭本地服务器
# 连接GitHub与本地
首先右键打开git bash输入
```
git config --global user.name "yourName"
git config --global user.email "yourMail@**.com"
```
name和email根据你的GitHub账号注册信息填写即可
然后生成密钥SSH key:
`ssh-keygen -t rsa -C "yourMail@**.com"`
回到GitHub，头像下面点击*settings*，再点击*SSH and GPG keys*新建一个ssh，命名随便
在git bash里输入`cat ~/.ssh/id_rsa.pub`
将输出内容复制粘贴到新建的ssh命名下面的框内
再在git bash里输入`ssh -T git@github.com`如若出现你的用户名，那就成功了
![](https://github.com/ruchoc/markdownPhotos/raw/main/pictures/3.png)
打开博客根目录下的`_config.yml`文件，这是博客的配置文件，具体的配置参数可以通过查看[hexo文档](https://hexo.io/zh-cn/docs/)里的配置区域了解，这里只做必要配置
修改最后一行的配置：

```
deploy:
  type: git
  repository: https://github.com/yourName/yourName.github.io
  branch: main
```
repository修改为你自己的GitHub库地址
# 写文章并发布
首先在博客根目录下打开git bash，输入`npm i hexo-deployer-git`安装一个扩展
然后输入`hexo new post "article title"`新建一篇文章
然后打开`D:\blog\sourse\_post`目录，里面就有你新建的文章文件了
文章是markdown格式书写的，在编写完文件后，回到git bash在根目录下输入
`hexo g`生成静态网页，再输入`hexo s`可以本地预览，然后输入`hexo d`上传到GitHub
这时打开你的github.io主页就可以看到发布的文章了

# 备份和迁移

我们能利用github部署博客，也能使用github来保存源文件。方法是在博客根目录下新建分支hexo，然后利用该分支，将我们的Markdown文章和其它文件上传到github托管。这样hexo d推送的是main分支，而git push推送的是hexo分支，互不干扰。

首先先克隆下我们在github上的博客仓库，新建分支hexo，然后只需要它的.git隐藏文件夹，其余删除，提交后将.git置于博客根目录，这样在根目录下git bash here后就能看到是hexo分支了。之后将目录下的所有添加并提交，然后推到github同名分支hexo即可。相关git操作可以看我的“git常用命令”的博客。